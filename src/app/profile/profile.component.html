<div class="container">
  <!-- Start Grid -->
  <div class="row">
    <!-- Full row -->
    <div
      style="padding-top: 2em; padding-bottom: 2em"
      class="col-12"
      *ngIf="userData"
    >
      <div class="jumbotron jumbotron-fluid">
        <h1 class="display-4">Welcome {{ userData.firstName }}</h1>
        <p class="lead" *ngIf="userData.role === 'super'">
          As a <strong>Super Admin</strong> you can edit users groups or chats
          from here!
        </p>
        <p class="lead" *ngIf="userData.role === 'group'">
          As a <strong>Group Admin</strong> you can edit groups or chats from
          here!
        </p>
        <p class="lead" *ngIf="userData.role === 'chat'">
          You can view your groups and chats from here!
        </p>
      </div>
      <hr />
    </div>

    <!-- 1/3 row -->
    <div
      class="col-4 d-flex flex-column align-items-center"
      *ngIf="userData"
    >
    <h3 style="margin-bottom: 20px;">Profile Picture</h3>
      <img
        src="{{ userData.profileImg }}"
        class="rounded-circle"
        style="width: 150px; height: 150px; margin-bottom: 15px"
        alt="Avatar"
      />
      <button type="button" style="margin-bottom: 20px;" class="btn btn-primary mt-auto">
        Upload Profile
      </button>
    </div>

    <!-- 2/3 row -->
    <div class="col-8 d-flex flex-column" *ngIf="userData">
      <h3 style="margin-bottom: 20px;">Details</h3>
    
      <!-- Name -->
      <p><strong>Name: </strong>
        <span *ngIf="!isEditMode">{{ userData.firstName }} {{ userData.lastName }}</span>
        <input *ngIf="isEditMode" type="text" [(ngModel)]="userEditData.firstName" class="form-control" style="display: inline-block; width: auto;" />
        <input *ngIf="isEditMode" type="text" [(ngModel)]="userEditData.lastName" class="form-control" style="display: inline-block; width: auto;" />
      </p>
    
      <!-- Status -->
      <p><strong>Current Status: </strong>
        <span *ngIf="!isEditMode">{{ userData.status }}</span>
        <input *ngIf="isEditMode" type="text" [(ngModel)]="userEditData.status" class="form-control" />
      </p>
    
      <!-- Username -->
      <p><strong>Username: </strong>
        <span *ngIf="!isEditMode">{{ userData.username }}</span>
        <input *ngIf="isEditMode" type="text" [(ngModel)]="userEditData.username" class="form-control" />
      </p>
    
      <!-- Email -->
      <p><strong>Email: </strong>
        <span *ngIf="!isEditMode">{{ userData.email }}</span>
        <input *ngIf="isEditMode" type="email" [(ngModel)]="userEditData.email" class="form-control" />
      </p>
    
      <!-- Date of Birth -->
      <p><strong>Date of Birth: </strong>
        <span *ngIf="!isEditMode">{{ userData.dob }}</span>
        <input *ngIf="isEditMode" type="date" [(ngModel)]="userEditData.dob" class="form-control" />
      </p>
    
      <!-- Buttons -->
      <button *ngIf="!isEditMode" type="button" style="width: 110px; margin-bottom: 20px;" class="btn btn-primary" (click)="toggleEditMode()">
        Edit Details
      </button>
      
      <div *ngIf="isEditMode">
        <button type="button" style="width: 120px; margin-bottom: 20px; margin-right: 10px;" class="btn btn-primary" (click)="saveDetails()">
          Save Details
        </button>
        <button type="button" style="width: 110px; margin-bottom: 20px;" class="btn btn-secondary" (click)="toggleEditMode()">
          Cancel
        </button>
      </div>
    </div>    

    <!-- Full row - Content for superuser -->
    <div class="row" *ngIf="userData.role === 'super' && allUsers?.length > 0">
      <hr />
      <h3>User Management</h3>
      <div class="col-3 card" *ngFor="let user of allUsers">
        <img
        src="{{ user.profileImg }}"
        class="rounded-circle"
        style="width: 75px; height: 75px; margin-bottom: 15px;"
        alt="Avatar"
      />
        <p><strong>Username: </strong>{{ user.username }}</p>
        <p><strong>Email: </strong>{{ user.email }}</p>
        <div class="button-group">
          <button *ngIf="userData.role === 'super'" (click)="deleteUser(user.id)" class="btn btn-outline-danger">Delete</button>
        </div>
      </div>
    </div>

    <!-- Full row - Content for group admin -->
    <div class="row" *ngIf="userData.role === 'super' || currentRole === 'group'">
      <hr />
      <h3>Group Management</h3>

      <div class="col-8">List</div>

      <div class="col-4">form</div>
    </div>

    <!-- Full row - Default content for other roles or no role -->
    <div
      class="row"
      *ngIf="
        userData.role === 'super' ||
        userData.role === 'group' ||
        userData.role === 'chat'
      "
    >
      <hr />
      <h3>Groups</h3>

      <div class="col-8">List</div>

      <div class="col-4">form</div>
    </div>
  </div>
</div>
